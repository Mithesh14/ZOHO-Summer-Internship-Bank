BRANCH

CREATE TABLE `zoho_bank`.`branch` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NOT NULL,
  `address` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE);

USER

CREATE TABLE `zoho_bank`.`users` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NOT NULL,
  `phone_num` CHAR(10) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `address` VARCHAR(150) NOT NULL,
  `role` CHAR(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE);


ALTER TABLE `zoho_bank`.`users` 
ADD COLUMN `loan_id` INT NOT NULL AFTER `role`,
ADD INDEX `fk_users_loan_idx` (`loan_id` ASC) VISIBLE;
;
ALTER TABLE `zoho_bank`.`users` 
ADD CONSTRAINT `fk_users_loan`
  FOREIGN KEY (`loan_id`)
  REFERENCES `zoho_bank`.`loan` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;



LOAN

CREATE TABLE `zoho_bank`.`loan` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NOT NULL,
  `amount` VARCHAR(10) NOT NULL,
  `user_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE,
  INDEX `fk_loan_user_idx` (`user_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_user`
    FOREIGN KEY (`user_id`)
    REFERENCES `zoho_bank`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


ACCOUNTS

CREATE TABLE `zoho_bank`.`accounts` (
  `account_num` VARCHAR(50) NOT NULL DEFAULT '10000',
  `type` VARCHAR(50) NOT NULL,
  `balance` VARCHAR(50) NOT NULL,
  `interest` VARCHAR(15) NOT NULL,
  `branch_id` INT NOT NULL,
  `user_id` INT NOT NULL,
  PRIMARY KEY (`account_num`),
  INDEX `fk_accounts_branch_idx` (`branch_id` ASC) VISIBLE,
  INDEX `fk_accounts_user_idx` (`user_id` ASC) VISIBLE,
  UNIQUE INDEX `account_num_UNIQUE` (`account_num` ASC) VISIBLE,
  CONSTRAINT `fk_accounts_branch`
    FOREIGN KEY (`branch_id`)
    REFERENCES `zoho_bank`.`branch` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_accounts_user`
    FOREIGN KEY (`user_id`)
    REFERENCES `zoho_bank`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

TRANSACTIONS

CREATE TABLE `zoho_bank`.`transactions` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `from_acc` VARCHAR(50) NOT NULL,
  `to_acc` VARCHAR(50) NOT NULL,
  `amount` VARCHAR(45) NOT NULL,
  `type` VARCHAR(45) NOT NULL,
  `status` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) VISIBLE,
  INDEX `fk_transactions_accounts_idx` (`from_acc` ASC) VISIBLE,
  INDEX `fk_transactions_accs2_idx` (`to_acc` ASC) VISIBLE,
  CONSTRAINT `fk_transactions_accounts`
    FOREIGN KEY (`from_acc`)
    REFERENCES `zoho_bank`.`accounts` (`account_num`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transactions_accs2`
    FOREIGN KEY (`to_acc`)
    REFERENCES `zoho_bank`.`accounts` (`account_num`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
